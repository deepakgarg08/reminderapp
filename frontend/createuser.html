<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <title>Title</title>
</head>
<body>
<div>

    <label for="username">username:</label><br>
    <input type="text" id="username" name="username"  required><br>
    <label for="name">name:</label><br>
    <input type="text" id="name" name="name"  required><br><br>
    <label for="mobile">mobile:</label><br>
    <input type="text" id="mobile" name="mobile"  ><br>
    <label for="address">address:</label><br>
    <input type="text" id="address" name="address" ><br><br>
    <label for="extras">extras:</label><br>
    <input type="text" id="extras" name="extras" ><br>
    <input type="submit" value="Submit" onclick="onSubmit()">

</div>
<script>
    function onSubmit() {
        let formjson = {};
        let username =    $('#username').val().trim()
        let name = $("#name").val().trim()
        let mobile = $("#mobile").val().trim()
        let address = $("#address").val().trim()
        let extras = $("#extras").val().trim()

        formjson.username = username;
        formjson.name = name;
        formjson.mobile = mobile;
        formjson.address = address;
        formjson.extras = extras;
        sendJsonToDatabase(formjson)

    }

    function sendJsonToDatabase(formjson) {
        $.ajax({
            async: true,
            url: 'http://127.0.0.1:3000/new',
            type: 'POST',
            data: formjson,
            // dataType: 'JSON',
            success: function(result) {
                console.log("check response result ", result)
                if (result === "username already exist") {
                    window.location.reload()
                }else if(result === "you are not authorized"){
                    window.location.href = "index.html"
                }
                else{
                    window.location.href = "main.html"
                }
            }
        });
    }
</script>

</body>
</html>