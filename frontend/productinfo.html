<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="jquery-3.4.1.min.js"></script>

    <title>Welcome to LALAkiSHop</title>
    <style>
        table {
            font-family: arial, sans-serif;
            /*border-collapse: collapse;*/
            width: 100%;
        }

        td, th {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }

        tr:nth-child(even) {
            background-color: #dddddd;
        }
    </style>
</head>
<body>

<h1>WELCOME TO THE LALAKISHOP</h1>
<div>
    <nav>
        <button onclick="readone()">SEARCH</button>
        <l1>Search All Customer &nbsp &nbsp &nbsp |</l1>
        <button onclick="readall()">SEARCH ALL</button>
        <l1>Delete Customer &nbsp &nbsp &nbsp |</l1>
    </nav>
</div>
<div>

    <h2 id="ncustomers">All product list</h2>

    <div id="product" >

        <table id="productTable">
            <tr>
                <th>id</th>
                <th>product_name</th>
                <th>description</th>
                <th>price</th>
                <th>note</th>
            </tr>
        </table>

    </div>

</div>

<script>
    $(document).ready(readall());

    function readall() {

        $.ajax({
            async: true,
            url: 'http://127.0.0.1:3000/readall',
            type: 'GET',
            success: function (res) {
                console.log("check response result ", res)
                if (res === "you are not authorized") {
                    rec.innerHTML = "you are not authorized"
                } else {
                    let Total_No_of_Records = res.Total_No_of_Records
                    for (let i = 1; i < res.Records.length; i++) {
                        displayList(res.Records[i])
                    }
                }
            }
        });
    }


    function displayList(data) {
        // var tb = document.getElementById('productTable');
        //
        // while (tb.rows.length > 1) {
        //     tb.deleteRow(1);
        // }
        //
        var row = document.getElementById("productTable").insertRow();

        if (data.products.length === 0 || data.products.length === null) {
            data.products = "-";
        } else {
            for (let i = 0; i < data.products.length; i++) {
                console.log(data.products[i].product_name)


            }
        }




        var cell11 = row.insertCell(0);
        var cell21 = row.insertCell(1);
        var cell31 = row.insertCell(2);
        var cell41 = row.insertCell(3);
        var cell51 = row.insertCell(4);

        cell11.innerHTML = data._id
        cell21.innerHTML = data.username
        cell31.innerHTML = data.name
        cell41.innerHTML = data.mobile
        cell51.innerHTML = data.note


    }


</script>


</body>
</html>